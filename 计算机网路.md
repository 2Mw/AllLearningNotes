

# 第一章

[TOC]

## 1.3

### 分组交换网的拓扑

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200227102743824.png" alt="image-20200227102743824" style="zoom:50%;" />



**分组交换的特点：**

不被某个用户所拥有，可以沿着多条路径进行

**分组交换的优点：**

1. 高效。不独占，动态分配带宽，对通信链路逐段占用(即同一段链路~[如BE]~不能同时使用，需要排队,这时候就产生了延时)
2. 灵活。以分组为单位和查找路由
3. 迅速。不用建立连接就能发送分组
4. 可靠。分布式的路由选择协议有好的生存性。

### 路由器

> 有多个输入口和输出口

**处理分组过程：**

1.暂存 2. 查找转发表，寻找转发端口 3.转发

### 主机与路由器作用的不同

主机是信息处理  路由器是存储转发交给主机

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200227105106721.png" alt="image-20200227105106721" style="zoom: 50%;" />

## 1.4 计算机网络的分类

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200227105016913.png" alt="image-20200227105016913" style="zoom: 50%;" />

### 用来把用户接入Internet的网络

接入网：AN(Access NetWork)：有ISP（互联网服务商）能让用户接入网络的“桥梁”。

## 1.5 计算机网络主要指标

### 速率

* 比特(bit)

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200227105645112.png" alt="image-20200227105645112" style="zoom: 50%;" />

### 时延

发送第一个字节起，到发送完最后一个字节。

**发送时延:**

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200227111349186.png" alt="image-20200227111349186" style="zoom:67%;" />

**传播时延：**

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200227111327647.png" alt="image-20200227111327647" style="zoom:50%;" />

## 1.6

链路层实现点对点通信

网络层实现所有网络节点之间的通信

传输层实现端对端通信

应用层实现应用与应用的通信

###  协议与服务

协议是“水平”的，服务是“垂直”的

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200305103808728.png" alt="image-20200305103808728" style="zoom:50%;" />

# 第二章 物理层

## 2.1 基本概念

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200305105116447.png" alt="image-20200305105116447" style="zoom:50%;" />

## 2.2 数据通信基础知识

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200305110618909.png" alt="image-20200305110618909" style="zoom:50%;" />

人的话音：300HZ-3400HZ，卫星通信：300MHZ-3GHZ



比特率=码元速率*log2V  V指码元个数

## 2.4 奈奎斯特和香农定理

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200312100500814.png" alt="image-20200312100500814" style="zoom: 67%;" />

**码间串扰的原因：**

经过各种变换出现的展宽现象。信道越窄，展宽现象越明显。

频率越快，更容易产生干扰，现象更明显。

**可传输的最高速率：**

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200312101744722.png" alt="image-20200312101744722" style="zoom:67%;" />

**香农定理：**

香农不仅考虑了信道受限，还考虑噪声（白噪声和高斯噪声）情况下，最大传输速率

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200312102302056.png" alt="image-20200312102302056" style="zoom:67%;" />

**练习作业：**

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200312103947817.png" alt="image-20200312103947817" style="zoom:67%;" />

1023

## 2.6 信道复用技术

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200312112053556.png" alt="image-20200312112053556" style="zoom: 50%;" />

FDM  TDM

码分复用：

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200319095649256.png" alt="image-20200319095649256" style="zoom:67%;" />

## 2.7 数字传输系统

## 2.8 宽带接入技术

xDSL技术

光纤FTTx

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200319095824451.png" alt="image-20200319095824451" style="zoom:50%;" />

# 数据链路层

## 3.1 点对点信道的数据链路层

**转义字符：**

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200324080532080.png" alt="image-20200324080532080" style="zoom:50%;" />

**透明传输：**

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200319100111219.png" alt="image-20200319100111219" style="zoom:67%;" />

**数据验证CRC验证：**

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200319105649520.png" alt="image-20200319105649520" style="zoom:67%;" />

作业：

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200319111002905.png" alt="image-20200319111002905" style="zoom:50%;" />

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200319111423724.png" alt="image-20200319111423724" style="zoom:50%;" />

**数据验证汉明码验证：**

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200319111954152.png" alt="image-20200319111954152" style="zoom: 50%;" />

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200324081659877.png" alt="image-20200324081659877" style="zoom:50%;" />

## 点对点PPP协议

> 例如PPPoe宽带拨号上网

**帧格式：**

标志字段：0x7E(01111110b)

地址字段：0xFF(11111111b)	不起作用

控制字段：0x3	通常是

FCS：差错控制校验

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200324082251350.png" alt="image-20200324082251350" style="zoom:50%;" />

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200324082442514.png" alt="image-20200324082442514" style="zoom:50%;" />

**字符填充：**

0x7E->0x7D 0x5E

0x7D->0x7D 0x5D

出现控制字符(<0x20)：0x7D 0x**

**零比特填充：**

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200324083208756.png" alt="image-20200324083208756" style="zoom:50%;" />

## 局域网的数据链路层

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200324083400098.png" alt="image-20200324083400098" style="zoom: 33%;" />



<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200324083743244.png" alt="image-20200324083743244" style="zoom:50%;" />



**两个子层**：

LLC层：逻辑链路控制，几乎不用了

MAC层：媒体接入控制

**适配器的作用：**

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200324084243475.png" alt="image-20200324084243475" style="zoom: 33%;" />

### CSMA/CD协议

CSMA/CD协议：Carrier Sense Multiple Access with Collision Detection

> 弊端：可以偷听

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200324085157219.png" alt="image-20200324085157219" style="zoom: 50%;" />

**特点：**

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200324085912337.png" alt="image-20200324085912337" style="zoom:67%;" />

曼彻斯特编码的特性：

把字符信息和传输频率传输数据，因此也称为**字同步编码**

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200324090346312.png" alt="image-20200324090346312" style="zoom:67%;" />

**碰撞检测**：

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200324090600654.png" alt="image-20200324090600654" style="zoom:50%;" />

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200324091219299.png" alt="image-20200324091219299" style="zoom:50%;" />

不能进行全双工通信，再发送数据一小时间内，存在碰撞的可能性。使得以太网的平均通信量远小于最高通信速率。

**最短有效帧长：**

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200324092345634.png" alt="image-20200324092345634" style="zoom: 50%;" />

**强化碰撞：**

**帧间最小间隔：**

一但总线开始空闲的时候，必须等待9.6μs才能再次发送数据。

**要点：**

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200324092840445.png" alt="image-20200324092840445" style="zoom: 50%;" />

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200324092924054.png" alt="image-20200324092924054" style="zoom:67%;" />

### 练习题作业：

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200324093119914.png" alt="image-20200324093119914" style="zoom: 80%;" />

### 广播信道数据链路层之一

#### ALOHA协议

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200326100843817.png" alt="image-20200326100843817" style="zoom:50%;" />

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200324093536394.png" alt="image-20200324093536394" style="zoom:50%;" />

利用率比较低。

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200326101322134.png" alt="image-20200326101322134" style="zoom:67%;" />

#### 令牌

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200326101643364.png" alt="image-20200326101643364" style="zoom:67%;" />

#### 集线器的星形拓扑

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200326102627169.png" alt="image-20200326102627169" style="zoom:50%;" />

10BASE-T：10-10MB/s   BASE-曼彻斯特编码      T-双绞线

**优缺点:**

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200326111603427.png" alt="image-20200326111603427" style="zoom: 50%;" />

### 以太网的信道利用率

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200326103832809.png" alt="image-20200326103832809" style="zoom:50%;" />



利用率公式：

$$s=\frac{T_0}{T_0+2τ*N+τ}$$

分子分母同除以T0

$$s=\frac{1}{1+(2N+1)\frac{τ}{T_0}}$$

**参数α=τ/T~0~:**

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200326104227025.png" alt="image-20200326104227025" style="zoom:50%;" />

**最大值：**

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200326104900591.png" alt="image-20200326104900591" style="zoom:50%;" />

即不发生碰撞。

### MAC

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200326110725119.png" alt="image-20200326110725119" style="zoom:67%;" />

无效的MAC帧：

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200326111044952.png" alt="image-20200326111044952" style="zoom:50%;" />

### 扩展以太网

1. 物理层扩展以太网

2. 数据链路层扩展以太网

   **网桥**会决定要不要广播，可以过滤通信量，增大吞吐量，减少碰撞率。

   扩大了物理范围，提高了可靠性。

   **网桥缺点**：增加了时延，在MAC子层没有流量控制功能。

   只适合用户数不多和通信量不大的局域网，否则又是会因为过多广播信息而产生网络堵塞。

   **网桥协议栈：**

   <img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200326112755890.png" alt="image-20200326112755890" style="zoom:50%;" />

### 网桥

可以隔离数据域，增大网络通信吞吐量

转发数据中之前必须执行CSMA/CD协议

**缺点：**

用于用户数不多的情景。

存储转发增加了时延。

在MAC子层没有流量控制的功能。

一个节点连了两个网桥之后会产生“广播风暴”

**透明网桥：**

按照自学习算法处理收到的帧和建立转发表。

A从x口转发的数据帧，则网桥沿x口反方向传送的帧一定会到达A。

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200331082208681.png" alt="image-20200331082208681" style="zoom:50%;" />

### 源路由网桥

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200331082945357.png" alt="image-20200331082945357" style="zoom:67%;" />

### 多接口网桥-以太网交换机

工作在**全双工模式**。可连很多接口，并且接口之间独立而且不干扰。

**虚拟局域网（VLAN）**：

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200331085250840.png" alt="image-20200331085250840" style="zoom:67%;" />

### 高速以太网

**吉比特以太网：**

既可以全双工，也可以半双工。

## 第四章 网络层

### 局域网与广域网

局域网+广域网=互联网

### 两种服务

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200331091349894.png" alt="image-20200331091349894" style="zoom:67%;" />

### 提供数据报服务的特点

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200331091513279.png" alt="image-20200331091513279" style="zoom: 67%;" />

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200331091800283.png" alt="image-20200331091800283" style="zoom:67%;" />

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200331091829557.png" alt="image-20200331091829557" style="zoom:67%;" />

### 虚电路交换

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200331092153392.png" alt="image-20200331092153392" style="zoom:67%;" />

数据报链路是**独占**的，而虚电路交换是可以**共享**的

虚电路不能实现广播。

### 两者区别：

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200402101444442.png" alt="image-20200402101444442" style="zoom: 50%;" />

数据报不能保证顺序，差错控制用用户主机负责。

## IP协议

四个配套协议：

1. 地址解析ARP
2. 逆地址解析RARP
3. 网际控制报文协议ICMP
4. 网际组管理协议IGMP

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200402102008585.png" alt="image-20200402102008585" style="zoom:50%;" />

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200402102845075.png" alt="image-20200402102845075" style="zoom:50%;" />

### 分类IP地址

点分十进制记法：

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200402105810836.png" alt="image-20200402105810836" style="zoom:67%;" />

A类:





B类:

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200402110151896.png" alt="image-20200402110151896" style="zoom:50%;" />

C类：

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200402110444321.png" alt="image-20200402110444321" style="zoom:33%;" />

其他：

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200402110513900.png" alt="image-20200402110513900" style="zoom:50%;" />![image-20200402110552945](F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200402110552945.png)

### IP范围

![image-20200402110552945](F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200402110552945-1627969769905.png)

### 特殊IP的用途

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200402110936038.png" alt="image-20200402110936038" style="zoom: 50%;" />

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200402111103646.png" alt="image-20200402111103646" style="zoom:50%;" />![image-20200402112009334](F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200402112009334.png)

### IP地址与硬件地址

![image-20200402112009334](F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200402112009334-1627969781843.png)

### 为什么不使用硬件地址进行通信

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200407082711227.png" alt="image-20200407082711227" style="zoom: 67%;" />

可能需要很多种对不同硬件转换

### IP数据报

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200407083512346.png" alt="image-20200407083512346" style="zoom:67%;" />

**首部**：20个字节，可选部分最大40字节

“首部长度”：每位表示4字节，最大1111表示15*4=60B ，减去固定长度，为40字节。

“区分服务”：选择高带宽/低时延/高安全的，一般不怎么用

“总长度”：每位表示1字节，最大可表示2^16^-1 = 65535字节。但不能超过底层链路层最大可承载长度。

“标识”：计数器，标识数据报，不同分片的标识都是一样的。

“标志”：3位。目前只有前两位起作用。最低位是**MF**(More fragment):表示还有分片，中间是**DF**(Don't Fragment)，DF=0才可分片。用于根据不同网络MTU不同，传输过程需要分片。

“片偏移”：用于分片使用。

分片最后的重组只能在主机上进行重组，不能在路由器上重组，不一定所有的数据报都走一个路由器。

“生存时间TTL”：数据报在网络中可通过的路由器数的最大值。每经过一次路由器就会减一。

**怎么重组**？首先利用标识位和源IP地址确定属于一个数据报，然后依靠MF位和片偏移确定不同分片的位置。

**数据部分**：

### 路由器的分组转发

![image-20200409101117183](F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200409101117183.png)

## 划分子网和构造超网

### 划分子网的基本思路

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200409101848939.png" alt="image-20200409101848939" style="zoom:67%;" />

![image-20200409102119966](F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200409102119966.png)

### 子网掩码subnet mask

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200409102656825.png" alt="image-20200409102656825" style="zoom:50%;" />

按位与运算。

### 例子

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200409103057577.png" alt="image-20200409103057577" style="zoom:67%;" />

### 使用子网掩码的分组转发

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200409103323953.png" alt="image-20200409103323953" style="zoom:67%;" />

### 重新定义分组转发

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200409103433031.png" alt="image-20200409103433031" style="zoom:67%;" />

### 作业本

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200409105355934.png" alt="image-20200409105355934" style="zoom: 67%;" />

```
128.96.39.1 => 128.96.39.0 => m0
128.96.40.1 => 128.96.40.0 => R2  这个不选 特定主机路由优先
128.96.40.1 => 128.96.40.1 => R3
128.96.40.10 => 128.96.40.10 => R2
128.96.40.100 => 128.96.40.100 => R5
192.4.153.10 => 192.4.153.10 => R5
```

作业二：

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200409110123377.png" alt="image-20200409110123377" style="zoom:67%;" />

```
Answer:
3个
1420-20=1400
0-1399	1400-2799	2800-2980
175 	350			425
1		1    		0
```

![img](file:///C:/Users/admin/Documents/WXWork/1688851843336693/Cache/Image/2020-04/企业微信截图_15864016046297.png)

作业三：

![image-20200409110906205](F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200409110906205.png)

```
6个
长度分别：
800 600 800 600 180
片偏移：
0 100 175 275 350
MF:
1 1 1 1 0
```

## 无分类编制CIDR

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200409111658046.png" alt="image-20200409111658046" style="zoom:80%;" />

### CIDR特点：

![image-20200409112216927](F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200409112216927.png)

### CIDR地址块

![image-20200409112859287](F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200409112859287.png)

### 作业：

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200414085400211.png" alt="image-20200414085400211" style="zoom:67%;" />

答案：

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200414090047973.png" alt="image-20200414090047973" style="zoom:67%;" />

## ICMP

> 为了提高IP数据提交成功的机会。（网络层IP层）

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200414091517087.png" alt="image-20200414091517087" style="zoom:67%;" />

### 格式：

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200414091549508.png" alt="image-20200414091549508" style="zoom:67%;" />

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200414091611040.png" alt="image-20200414091611040" style="zoom:67%;" />

### 类型

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200414091803994.png" alt="image-20200414091803994" style="zoom:67%;" />

其中Ping报文就属于ICMP类型

### 应用1--ping

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200414092631714.png" alt="image-20200414092631714" style="zoom:67%;" />

### 应用2--traceroute  / tracert

观察到达某服务器需要多少跳路由器：

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200414093111843.png" alt="image-20200414093111843" style="zoom: 67%;" />

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200414093425618.png" alt="image-20200414093425618" style="zoom:67%;" />

### 路由选择协议

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200416102253949.png" alt="image-20200416102253949" style="zoom:67%;" />

### RIP router information protocol

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200416102504709.png" alt="image-20200416102504709" style="zoom:67%;" />

路由表建立：

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200416103124136.png" alt="image-20200416103124136" style="zoom:67%;" />

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200416103804832.png" alt="image-20200416103804832" style="zoom:67%;" />

### RIP协议报文

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200416105650286.png" alt="image-20200416105650286" style="zoom:67%;" />

### RIP优缺点

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200416110047371.png" alt="image-20200416110047371" style="zoom:67%;" />

### OSPF协议

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200416111613784.png" alt="image-20200416111613784" style="zoom:67%;" />

特点：

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200416112743992.png" alt="image-20200416112743992" style="zoom:67%;" />

### BGP协议

> 交换可达性信息

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200421082000233.png" alt="image-20200421082000233" style="zoom:67%;" />

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200421082024348.png" alt="image-20200421082024348" style="zoom:67%;" />

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200421082054567.png" alt="image-20200421082054567" style="zoom:67%;" />

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200421082310967.png" alt="image-20200421082310967" style="zoom:67%;" />

### 多播路由

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200421085912431.png" alt="image-20200421085912431" style="zoom:67%;" />

### VPN与NAT

本地地址：有本机构自行分配

全球地址：全球唯一IP地址，必须向管理地址申请

![image-20200421090834500](F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200421090834500.png)



### NAPT

可以使用相同的全球IP地址传给不同的端口号，从而满足本地网络不同主机的数据传送。

### 

# 传输层

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200428081118107.png" alt="image-20200428081118107" style="zoom:67%;" />

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200428081254713.png" alt="image-20200428081254713" style="zoom:67%;" />

![image-20200428081318693](F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200428081318693.png)

### UDP

![image-20200428083025643](F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200428083025643.png)

![image-20200428083347701](F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200428083347701.png)

![image-20200428083935228](F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200428083935228.png)

![image-20200428084120472](F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200428084120472.png)

![image-20200428084207597](F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200428084207597.png)

### TCP

![image-20200428085218497](F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200428085218497.png)

![image-20200428085802593](F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200428085802593.png)

![image-20200428090132900](F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200428090132900.png)

对应的是两个存储空间。

### TCP可靠传输工作原理

![image-20200428090816237](F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200428090816237.png)



**停止等待协议：**

![image-20200428091207801](F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200428091207801.png)

![image-20200428091454612](F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200428091454612.png)

![image-20200428091655468](F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200428091655468.png)

![image-20200428091833230](F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200428091833230.png)

![image-20200428092533625](F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200428092533625.png)

![image-20200428093113801](F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200428093113801.png)
$$
U = \frac{T_D}{T_D+RTT+T_A}
$$


**流水线传输**：

![image-20200428093447388](F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200428093447388.png)

![image-20200430101720224](F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200430101720224.png)

![image-20200430101810989](F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200430101810989.png)

窗口：接收方的接受能力



### TCP具体实现：

![image-20200430102807484](F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200430102807484.png)

![image-20200430103201197](F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200430103201197.png)

### 滑动窗口协议

### 连续ARQ和停止等待协议区别

![image-20200430103712022](F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200430103712022.png)

### 作业

![image-20200430104709056](F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200430104709056.png)

![image-20200430105038804](F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200430105038804.png)

如果采用累计确认：

![image-20200430105404579](F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200430105404579.png)

![image-20200430105501533](F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200430105501533.png)

### TCP报文

![image-20200430105836732](F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200430105836732.png)

![image-20200430105849536](F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200430105849536.png)

![image-20200430112724792](F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200430112724792.png)

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200505080726786.png" alt="image-20200505080726786" style="zoom:67%;" />

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200505080829964.png" alt="image-20200505080829964" style="zoom:67%;" />

时间戳选项：用于测量RTT选项，设置ARQ超时时钟

### 以字节为单位的滑动窗口

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200505081519737.png" alt="image-20200505081519737" style="zoom:67%;" />



<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200505081854065.png" alt="image-20200505081854065" style="zoom:67%;" />

### 发送缓存和接受缓存

发送窗口通常是发送缓存的一部分。

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200505083425638.png" alt="image-20200505083425638" style="zoom:67%;" />

注意事项：

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200505083620680.png" alt="image-20200505083620680" style="zoom:67%;" />

### 作业：

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200505083942630.png" alt="image-20200505083942630" style="zoom:67%;" />



<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200505085824175.png" alt="image-20200505085824175" style="zoom:67%;" />

### 超时重传时间的设置

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200505090505338.png" alt="image-20200505090505338" style="zoom:67%;" />



<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200505090703360.png" alt="image-20200505090703360" style="zoom:67%;" />

### Karn算法

如果是重传，就忽略超时重传。

这个会有问题，所以就产生了修正的Karn算法

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200505091314644.png" alt="image-20200505091314644" style="zoom:67%;" />

### 选择确认SACK

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200505092355290.png" alt="image-20200505092355290" style="zoom:67%;" />

### 利用滑动窗口控制流量控制

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200505093102315.png" alt="image-20200505093102315" style="zoom:67%;" />

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200505093244968.png" alt="image-20200505093244968" style="zoom:67%;" />

思索解决：

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200505093302224.png" alt="image-20200505093302224" style="zoom:67%;" />

传输效率:

<img src="F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200505093536860.png" alt="image-20200505093536860" style="zoom:67%;" />

### 糊涂窗口综合征：

![image-20200507101846664](F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200507101846664.png)

Nagle算法：

![image-20200507102245778](F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200507102245778.png)

![image-20200507102432055](F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200507102432055.png)

接收方糊涂综合征：

只接受一个字节：

![image-20200507102748489](F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200507102748489.png)

### 拥塞控制:

![image-20200507103224930](F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200507103224930.png)

![image-20200507103523533](F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200507103523533.png)

![image-20200507103544847](F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200507103544847.png)

![image-20200507103816984](F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200507103816984.png)

![image-20200507104122600](F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200507104122600.png)



![image-20200507104821666](F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200507104821666.png)

![image-20200507105016422](F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200507105016422.png)

![image-20200507105759889](F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200507105759889.png)

![image-20200507110105393](F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200507110105393.png)

![image-20200507110453992](F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200507110453992.png)

![image-20200507111206640](F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200507111206640.png)

没有按序收到。

### 拥塞控制算法

1. 慢开始slow start，用来确定网络的负载能力和拥塞程度。由小到大逐步增大拥塞窗口数值。

   两个变量：cwnd，慢开始门限SMSS

   ![image-20200507112219149](F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200507112219149.png)

   ![image-20200507113026361](F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200507113026361.png)

   ![image-20200512081624108](F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200512081624108.png)

2. 拥塞避免：使网络不容易出现拥塞

   ![image-20200512081817811](F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200512081817811.png)

3. 快重传，使cwnd快速变化。

   ![image-20200512082338627](F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200512082338627.png)

   ![image-20200512082801868](F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200512082801868.png)

4. 快恢复

### AIMD

![image-20200512083216072](F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200512083216072.png)

![image-20200512083353975](F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200512083353975.png)

### Active Queue Management主动队列管理

![image-20200512083755146](F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200512083755146.png)

![image-20200512083900732](F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200512083900732.png)

![image-20200512084305415](F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200512084305415.png)

![image-20200512084538864](F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200512084538864.png)

![image-20200512085609435](F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200512085609435.png)

### C/S方式

TCP三次握手，两个来回，两个确认。

SYN报文只是同步数据，但还是占用一个字节。

![image-20200512091043175](F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200512091043175.png)

连接释放：

四次报文握手

![image-20200512091605673](F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200512091605673.png)

### 作业

![image-20200512092259039](F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200512092259039.png)

![image-20200512093056070](F:\课程及作业\重要的课\计算机网络\计算机网路.assets\image-20200512093056070.png)